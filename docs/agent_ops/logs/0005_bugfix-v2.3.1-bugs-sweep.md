<!-- docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md -->

# GLOBAL LOG — 0005_bugfix-v2.3.1-bugs-sweep

- Старт: 2025-12-20T20:15:29+03:00
- Агент: Codex (ChatGPT, GPT-5)
- Репозиторий: AXIOM_DEMO_UI (ui)
- Ветка: bugfix/v2.3.1-bugs-sweep (планируемая)
- Задача: Итерация баг/фикс кампания v2.3.1 (backlog из `docs/bugs`)
- SPEC: docs/iterations/bugfix-v2.3.1-bugs-sweep/spec.md
- screenshots: docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots
- Статус: ACTIVE

---

## Оглавление — 2026-01-04
- Закрыты баги вкладки `/dashboard`: меню пользователя, венки, панель status (масштаб/переполнение).
- Пульсация 3-го круга венка возвращена и ограничена только hover‑состоянием.
- Зафиксировано: вкладка `/dashboard` требует дизайн/функционал/контент доработку и заполнение fullscreen.
- Следующий этап: BUG‑scale для `/dashboard/content/` (сильные регрессы при смене размера окна, ожидается много правок).

## Step A — Discovery
- 2026-01-10T18:22:51+03:00 — Действие: Фидбэк CREATOR: визуальных изменений не видно; возможно трансформация мешает применению правок в превью. → Результат: OK
- 2026-01-10T17:49:19+03:00 — Действие: Фидбэк CREATOR: превью всё ещё не совпадает с референсом (Windows scale 100%, browser 100%). → Результат: OK
- 2026-01-10T16:43:47+03:00 — Действие: Фидбэк CREATOR: в превью‑карточке много пустого места; нужен адаптивный масштаб шрифта под fullscreen/windowed и разные масштабы окна. → Результат: OK
- 2026-01-10T15:50:31+03:00 — Действие: Получен фидбэк CREATOR: улучшить превью в `/dashboard/content` по референсу и текущим скринам (managed, `?debug=1`), обеспечить корректное отображение карточки на fullscreen и других разрешениях. → Результат: OK
- 2026-01-07T19:10:45+03:00 — Действие: Фидбэк CREATOR: windowed‑режим всё ещё «обрезает» UI (managed, `?debug=1`), проблема воспроизводится по сайту. → Результат: OK
- 2026-01-07T18:37:10+03:00 — Действие: Получены скрины windowed vs fullscreen (managed, `?debug=1`); подтверждено, что проблема «обрезанного» окна проявляется на всём сайте. Гипотеза: блоки с `100dvh` внутри canvas визуально уменьшаются при `viewportScale < 1`. → Результат: OK
- 2025-12-20T20:15:29+03:00 — Действие: Старт сессии для подготовки SPEC и чеклистов багфиксов v2.3.1; подтвердил контекст репо и ветку-назначение. → Результат: OK
- 2025-12-20T20:25:40+03:00 — Действие: Выбран баг `BUG-003_reader-overlay-menu-scroll` как первый кандидат; собрал точки входа: `src/features/content/pages/ReaderPage.tsx` (рендер меню/overlay + портал), `styles/content-hub-v2.css` (позиционирование .axr-menu/.axr-overlay). → Результат: OK
- 2025-12-29T23:31:01+03:00 — Действие: Новый агент принял задачу; сверил текущий контекст 0005, незакоммиченные правки (scale manager/app.css/spec), просмотрел скриншоты 12.29 и подтвердил регресс managed‑масштаба (canvas визуально уходит влево). → Результат: OK
- 2025-12-30T00:11:24+03:00 — Действие: Получен фидбэк: baseline‑скрины совпадают, но ошибки BUG-006 остаются; дополнительно зафиксирован регресс — news ticker “News Wire” перестал анимироваться. → Результат: OK
- 2025-12-30T00:27:04+03:00 — Действие: Подтверждён повторный фидбэк: News Wire всё ещё не активен (лента не идёт после добавления новости). → Результат: OK
- 2026-01-04T01:41:07+03:00 — Действие: Получены новые скриншоты 01.04 (разные разрешения) с актуальными багами; подтверждено: футер исправлен, меню и венки всё ещё сломаны. → Результат: OK
- 2026-01-04T14:51:06+03:00 — Действие: Перепроверил лог 0005, материалы спека масштаба и новые скриншоты 01.04 (menu/wreath), сверил текущие гипотезы по смещению меню и переполнению венков. → Результат: OK
- 2026-01-04T15:45:55+03:00 — Действие: Получен фидбэк CREATOR: меню ок, венок всё ещё с внешним кругом; devtools показывает различие размеров контейнера и canvas. → Результат: OK
- 2026-01-04T16:45:31+03:00 — Действие: Получен фидбэк CREATOR: венок исправлен, остаётся баг панели status (контент выходит за границы при определённом масштабе). → Результат: OK
- 2026-01-04T17:27:52+03:00 — Действие: Получен фидбэк CREATOR: новый баг — 3-й круг венка неверно/пропадает на средних/малых масштабах, fullscreen ок. → Результат: OK
- 2026-01-04T17:42:06+03:00 — Действие: Получен фидбэк CREATOR: 3-й круг отображается корректно, но пропала пульсация. → Результат: OK
- 2026-01-04T18:01:29+03:00 — Действие: Получен фидбэк CREATOR: пульсации нет, круг статичен. → Результат: OK
- 2026-01-04T18:14:53+03:00 — Действие: Получен фидбэк CREATOR: пульсации всё ещё нет, круг статичен. → Результат: OK
- 2026-01-04T18:30:04+03:00 — Действие: Получен фидбэк CREATOR: пульсация есть, но нужна только по hover. → Результат: OK
- 2026-01-04T18:30:04+03:00 — Действие: Получен фидбэк CREATOR: баги вкладки `/dashboard` закрыты; требуется дизайн/функционал/контент доработка на fullscreen. → Результат: OK
- 2026-01-04T18:30:04+03:00 — Действие: Зафиксирован следующий этап — масштаб/адаптация `/dashboard/content/` (сильные регрессы при ресайзе окна). → Результат: OK
- 2026-01-05T12:42:17+03:00 — Действие: Принял продолжение по `/dashboard/content`; перечитал `AGENTS.md`, лог 0005 и spec масштаба; просмотрел baseline/bug скрины content_01/02/03, отметил регрессы сеток (CategoryStats, фильтры, split list/preview) при windowed/resize; запросил у CREATOR параметры проверки. → Результат: OK

## Step B — Implementation
- 2026-01-10T18:22:51+03:00 — Действие: Усилил типографику и плотность списка в превью, добавил fallback‑scale в CSS; расширил Scale Debug значением `--ax-preview-text-scale` для верификации. Файлы: `styles/content-hub-v2.css`, `components/ScaleDebug.tsx`. → Результат: OK
- 2026-01-10T17:49:19+03:00 — Действие: Усилил масштаб типографики превью в managed‑режиме и увеличил межстрочные интервалы для lead/списков, чтобы плотнее заполнить карточку под референс. Файлы: `lib/ui/scaleManager.ts`, `styles/content-hub-v2.css`. → Результат: OK
- 2026-01-10T16:43:47+03:00 — Действие: Добавил системную переменную `--ax-preview-text-scale` (managed‑режим) и применил к типографике превью‑карточки, чтобы масштаб текста адаптировался под окно. Файлы: `lib/ui/scaleManager.ts`, `styles/content-hub-v2.css`. → Результат: OK
- 2026-01-10T15:50:31+03:00 — Действие: Улучшил адаптивность превью‑карточки: масштабировал min-height медиа по `--ax-scale`, перевёл фиксированные отступы/зазоры на токены, сделал правую колонку flex и закрепил футер снизу для более ровного заполнения высоты. Файл: `styles/content-hub-v2.css`. → Результат: OK
- 2026-01-07T19:10:45+03:00 — Действие: Ослабил условие shrink для managed: масштабирование включается только если и ширина, и высота окна <70% базы (убираем лишний shrink в «высоких» окнах). Файл: `lib/ui/scaleManager.ts`. → Результат: OK
- 2026-01-07T18:37:10+03:00 — Действие: Компенсировал высоту full‑height контейнеров в managed‑режиме: `ax-shell` и `ax-login` теперь используют `calc(100dvh / --ax-viewport-scale)`. Файл: `styles/app.css`. → Результат: OK
- 2026-01-07T17:19:22+03:00 — Действие: Пересчитал managed viewport‑scale: масштабирование включается только при окнах <70% от базы, иначе `viewportScale=1` (расчёт по CSS‑viewport, без DPR). Файл: `lib/ui/scaleManager.ts`. → Результат: OK
- 2026-01-07T17:19:22+03:00 — Действие: Обновил условия съёмки (перешли на Windows scale 100%/browser zoom 100%, прежние параметры помечены отдельно). Файл: `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/README.md`. → Результат: OK
- 2026-01-05T18:38:54+03:00 — Действие: Для managed масштаба ввёл гибридный расчет: DPR используется только когда окно соответствует базовому 1920x1080, иначе масштаб считается по CSS‑viewport; это должно уменьшить «крупные» элементы в with‑chrome. Файл: `lib/ui/scaleManager.ts`. → Результат: OK
- 2026-01-05T18:06:54+03:00 — Действие: В managed‑режиме компенсировал высоту страницы по `--ax-viewport-scale`, чтобы нижний status‑footer не «уезжал» при скролле windowed. Файл: `styles/red-protocol-overrides.css`. → Результат: OK
- 2026-01-05T17:55:51+03:00 — Действие: Учёл `devicePixelRatio` в расчёте managed‑viewport (масштаб от физического разрешения), чтобы при Windows 125% UI не «сжимался». Файл: `lib/ui/scaleManager.ts`. → Результат: OK
- 2026-01-05T17:08:12+03:00 — Действие: Перевёл дефолт масштаба на managed (legacy теперь через `?scale=legacy`), расширил команды и пути зависимости для масштабирования/overlay. Файлы: `lib/ui/scaleManager.ts`, `docs/iterations/ui-scale-normalization-v2.3.1/commands/README.md`. → Результат: OK
- 2026-01-05T16:33:17+03:00 — Действие: Добавил динамическую компенсацию legacy‑масштаба через `--ax-viewport-scale`, чтобы windowed не «сжимал» контент; базовый `--ax-ui-scale` вынесен в `--ax-ui-scale-base`. Файл: `styles/app.css`. → Результат: OK
- 2026-01-05T15:57:09+03:00 — Действие: Расширил превью до ширины панели (убрал max-width), увеличил высоту медиа, подтянул типографику хедера; добавил декоративные линии под заголовками “Ключевые маркеры/Сигнатура”, усилил цвет текста списков, убрал LANG из meta‑строки. Файлы: `src/features/content/components/ContentPreview.tsx`, `styles/content-hub-v2.css`. → Результат: OK
- 2026-01-05T14:59:03+03:00 — Действие: Обновил превью контент‑хаба: маппинг статуса/класса из manifest (meta.fileStatus + subCategory), добавил ZONE в мета‑строку; снизил плотность/паддинги/шрифты в `ax-content-preview` под токены. Файлы: `app/routes/dashboard/content/ContentCategoryView.tsx`, `src/features/content/components/ContentPreview.tsx`, `styles/content-hub-v2.css`. → Результат: OK
- 2026-01-05T14:31:50+03:00 — Действие: Уточнил анализ скринов 01.05 (добавлен ref_section и перечень баг‑элементов по каждому размеру) в `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/README.md`. → Результат: OK
- 2026-01-05T13:37:12+03:00 — Действие: Проанализировал скриншоты 01.05 по `/dashboard/content` и добавил наблюдения в README скринов. Файл: `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/README.md`. → Результат: OK
- 2025-12-20T20:17:20+03:00 — Действие: Создал итерационный SPEC `docs/iterations/bugfix-v2.3.1-bugs-sweep/spec.md` (цели, процесс, чеклист приоритетных багов, правила коммитов/QA). → Результат: OK
- 2025-12-20T20:28:40+03:00 — Действие: Обновил BUG-003 статус на IN_PROGRESS и собрал привязанные файлы для фикса (Reader: `src/features/content/pages/ReaderPage.tsx`; стили меню/overlay: `styles/content-hub-v2.css`; баг-карточка `docs/bugs/BUG-003_reader-overlay-menu-scroll.md`). Сформировал дорожную карту: fixed overlay/menu через портал, scroll-lock на body (fixed + top=-scrollY), z-index и safe-top, QA в разных позициях скролла. → Результат: OK
- 2025-12-20T20:34:30+03:00 — Действие: Реализовал фикс BUG-003: перевёл overlay/menu на `position: fixed` с `100dvh`, добавил оболочку `.axr-menu-shell` (fixed, pointer-events:none), повысил z-index; добавил scroll-lock в ReaderPage (body fixed с восстановлением scrollY). Файлы: `styles/content-hub-v2.css`, `src/features/content/pages/ReaderPage.tsx`, `docs/bugs/BUG-003_reader-overlay-menu-scroll.md`, `docs/iterations/bugfix-v2.3.1-bugs-sweep/spec.md`. → Результат: OK
- 2025-12-20T20:48:16+03:00 — Действие: В ответ на фидбэк (скролл должен работать под меню) убрал жёсткий scroll-lock с body в ReaderPage и разрешил touch-action на overlay (`pan-y/pinch-zoom`), чтобы прокрутка контента сохранялась при открытом меню. Коммит не делал (ожидается повторная проверка UI). Файлы: `src/features/content/pages/ReaderPage.tsx`, `styles/content-hub-v2.css`. → Результат: WIP
- 2025-12-20T20:59:20+03:00 — Действие: Анализ багов после повторной проверки: меню остаётся привязано к верхнему offset и перекрывает header (нужно опустить z-index меню/overlay ниже шапки и вычислять фактическую высоту шапки); скролл идёт одновременно в меню и в контенте, но позиция меню не учитывает текущий scroll контента (фиксированная привязка). План: (1) перенести портал наверняка в `document.body` и убедиться, что нет `transform` родителя; (2) динамически измерять высоту `.axr-header` и устанавливать CSS-переменную для top/height overlay/menu; (3) опустить z-index overlay/menu ниже header; (4) оставить scroll свободным, но обеспечить чтобы overlay покрывал viewport под шапкой; (5) при необходимости добавить gap от header через env(safe-area-inset-top). → Результат: TODO
- 2025-12-20T21:08:29+03:00 — Действие: Попытка улучшения: портал теперь принудительно `document.body` (fallback), добавлен расчёт динамической высоты `.axr-header` (`--axr-header-h-dyn`) через layout effect; overlay/menu топ/высота завязаны на эту переменную, z-index overlay/menu опущены ниже header. Скролл-lock по-прежнему отключён. Коммита нет, требуется повторная ручная проверка UI. Файлы: `src/features/content/pages/ReaderPage.tsx`, `styles/content-hub-v2.css`. → Результат: WIP
- 2025-12-20T21:17:12+03:00 — Действие: Внесены UX-ограничители прокрутки без коммита: overlay теперь блокирует прокрутку (touch-action:none, overscroll-behavior:contain, preventDefault на wheel/touchmove), меню получает overscroll-behavior:contain, чтобы колесо/жесты не прокручивали страницу. Цель — меню и overlay независимы от скролла контента, меню скроллится только внутри. Требуется повторная проверка. Файлы: `src/features/content/pages/ReaderPage.tsx`, `styles/content-hub-v2.css`. → Результат: WIP
- 2025-12-20T21:25:30+03:00 — Действие: Начал рефакторинг слоя меню: вынес слой в компонент `ReaderMenuLayer` (portal + фильтр + UI), убрал inline Portal из ReaderPage. Добавил классы `axr-menu-layer` и включение pointer-events только при открытии; меню/overlay получают z-index ниже header. Scroll-lock не используется. Требуется повторная проверка (цель — независимый скролл меню, overlay фиксирован, страница скроллится отдельно). Файлы: `src/features/content/components/ReaderMenuLayer.tsx`, `src/features/content/pages/ReaderPage.tsx`, `styles/content-hub-v2.css`, лог 0005. → Результат: WIP
- 2025-12-20T21:40:58+03:00 — Действие: Исправил TS-ошибку (activeId передавался при null entry), подправил `ReaderPage` пропсы. Баг остаётся нерешённым (меню не открывается из любого места, scroll связывается с html-контентом), требуется дальнейший дизайн механизма. Файлы: `src/features/content/pages/ReaderPage.tsx`. Коммит будет сделан для фиксации прогресса, баг остаётся OPEN. → Результат: WIP/FAIL
- 2025-12-20T21:48:00+03:00 — Действие: Продолжил рефактор: расширил тип `activeId` в `ReaderMenuLayer` (string|null) с передачей precomputed `activeId` в `ReaderPage`, чтобы снять TS ошибки exactOptionalPropertyTypes; состояние бага неизменное (меню не открывается корректно из любой точки, скролл/слои требуют дальнейшей проработки). Файлы: `src/features/content/components/ReaderMenuLayer.tsx`, `src/features/content/pages/ReaderPage.tsx`. Коммит планируется, баг остаётся OPEN. → Результат: WIP/FAIL
- 2025-12-20T22:10:00+03:00 — Действие: Радикальный шаг: ввёл отдельный scroll-контейнер `.axr-scroll` внутри Reader (теперь скролл идёт по контейнеру, не по body), добавил проксирование wheel/touch на overlay для управления скроллом контента при открытом меню (overlay остаётся кликабельным). Меню/overlay остаются фиксированными и независимыми от скролла контента. Коммита нет (нужна проверка UI). Файлы: `src/features/content/pages/ReaderPage.tsx`, `src/features/content/components/ReaderMenuLayer.tsx`, `styles/content-hub-v2.css`. → Результат: WIP
- 2025-12-20T22:18:40+03:00 — Действие: По фидбэку UI (меню открывается от любой точки, но перекрывает header/overlay не закрывает контент/скролл контента блокируется) скорректировал слои: `axr-menu-layer` ограничен областью под header (top/height через `--axr-header-h-dyn`), обновлён поиск scrollRoot при open. Требуется повторная проверка, баг остаётся OPEN. Файлы: `src/features/content/components/ReaderMenuLayer.tsx`, `styles/content-hub-v2.css`. → Результат: WIP/FAIL
- 2025-12-20T22:33:10+03:00 — Действие: Для стабилизации высоты header добавил `ResizeObserver` в `ReaderMenuLayer` (динамическое обновление `--axr-header-h-dyn`), чтобы слой меню/overlay не перекрывал шапку и корректно рассчитывал высоту под viewport. Коммита нет, требуется повторная проверка UI и подтверждение. Файлы: `src/features/content/components/ReaderMenuLayer.tsx`. → Результат: WIP
- 2025-12-22T19:12:40+03:00 — Действие: Пересчёт высоты header перевёл на `offsetHeight` (исключение двойного масштаба при `zoom/transform`), слой меню/overlay перевёл на `top + bottom` вместо `height: 100dvh` (стабилизация покрытия под шапкой). Добавил ленивое восстановление scrollRoot в overlay. Требуется повторная проверка UI. Файлы: `src/features/content/components/ReaderMenuLayer.tsx`, `styles/content-hub-v2.css`. → Результат: WIP
- 2025-12-22T18:12:33+03:00 — Действие: Перенёс прокрутку при открытом меню на глобальные `wheel/touch` обработчики (document-level) с проверкой цели: меню скроллится самостоятельно, фон прокручивается через `#axr-scroll` при событиях вне меню. Overlay теперь только кликабельный слой закрытия. Файлы: `src/features/content/components/ReaderMenuLayer.tsx`. → Результат: WIP
- 2025-12-22T18:48:22+03:00 — Действие: Старт BUG-006 (scale parity windowed): скорректировал глобальный зум под windowed режим — для `html` оставлен `zoom/transform` 0.8, но добавлен режим “fit” при ширине ≤1600px (расширение layout-width через `width/height`), чтобы окно масштабировалось без перестановки блоков. Файлы: `styles/app.css`, `docs/bugs/BUG-006_scale-parity-windowed.md`, `docs/bugs/00_BUG_INDEX.md`. → Результат: WIP
- 2025-12-22T19:15:45+03:00 — Действие: Пересмотр BUG-006: убрал “fit”-логику (усугубляла дрейф), ввёл адаптивный `--ax-ui-scale` (0.8 ≥1600, 0.9 до 1440, 1.0 ниже 1440) с чистым zoom/transform и без доп. компенсаций. Обновил гипотезы в карточке BUG-006. Требуется ручная проверка. Файлы: `styles/app.css`, `docs/bugs/BUG-006_scale-parity-windowed.md`. → Результат: WIP
- 2025-12-22T19:26:41+03:00 — Действие: Откат адаптивного `--ax-ui-scale` из-за регресса (0.8 scale пропал, элементы выросли). Вернул базовый `0.8` для `html` zoom/transform, обновил заметки BUG-006. Файлы: `styles/app.css`, `docs/bugs/BUG-006_scale-parity-windowed.md`. → Результат: WIP
- 2025-12-29T19:10:32+03:00 — Действие: Переименовал тикерный `.ax-viewport` в `.ax-ticker__viewport`, чтобы освободить класс для нового canvas‑слоя масштабирования. Файлы: `components/news/HeadlinesTicker.tsx`, `styles/ticker.css`. → Результат: OK
- 2025-12-29T19:15:17+03:00 — Действие: Добавил `ScaleViewport` (ax‑viewport/ax‑canvas) и `#ax-modal-root`, перевёл порталы на новый root (с fallback). Файлы: `components/ScaleViewport.tsx`, `components/UserMenuDropdown.tsx`, `components/Modal.tsx`, `src/features/content/components/ReaderMenuLayer.tsx`. → Результат: OK
- 2025-12-29T19:25:50+03:00 — Действие: Добавил Scale Manager (CSS‑переменные масштаба/virtual size), подключил в `app/main.tsx`, ввёл managed‑режим в `styles/app.css`. Файлы: `lib/ui/scaleManager.ts`, `app/main.tsx`, `styles/app.css`. → Результат: OK
- 2025-12-29T20:16:11+03:00 — Действие: Диагностировал регресс: глобальный контейнер `ax-viewport` конфликтовал с `.ax-viewport` из `ax-design/components.css` (height 72vh + overflow hidden), из‑за чего пропал скролл, «замер» тикер и footer сместился. Исправил: переименовал слой масштабирования в `ax-scale-viewport/ax-scale-canvas` и обновил spec. Файлы: `components/ScaleViewport.tsx`, `styles/app.css`, `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`. → Результат: OK
- 2025-12-29T23:31:55+03:00 — Действие: Исправил дрейф canvas в managed‑режиме: выставил `transform-origin: top center` для `ax-scale-canvas`, чтобы масштабирование центрировалось и не уводило UI влево. Файл: `styles/app.css`. → Результат: OK
- 2025-12-29T23:41:22+03:00 — Действие: Зафиксировал дефолтный режим масштаба как legacy (переключение через `?scale=`), чтобы избежать регрессий managed до готовности. Файлы: `lib/ui/scaleManager.ts`, `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`. → Результат: OK
- 2025-12-30T00:11:24+03:00 — Действие: Укрепил инициализацию ticker: добавил повторные попытки построения ленты при нулевой ширине, пересборку на resize и безопасные проверки размеров. Файл: `components/news/HeadlinesTicker.tsx`. → Результат: OK
- 2025-12-30T00:27:04+03:00 — Действие: Исправил высоту viewport для News Wire, чтобы абсолютный трек не обрезался (высота 100%). Файл: `styles/ticker.css`. → Результат: OK
- 2026-01-03T20:48:08+03:00 — Действие: Подготовил шаг 0: добавил debug‑оверлей масштаба и флаг `?debug=1` для вывода текущих scale‑параметров (mode/layout/virtual/dpr), чтобы ускорить сверку с baseline. Файлы: `components/ScaleDebug.tsx`, `components/ScaleViewport.tsx`, `lib/ui/scaleManager.ts`, `styles/app.css`. → Результат: OK
- 2026-01-03T21:00:05+03:00 — Действие: Шаг 1 — выставил плотность managed‑масштаба в 0.648 (≈ legacy 0.81 * 0.8) для совпадения с baseline. Файлы: `lib/ui/scaleManager.ts`, `styles/app.css`, `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`. → Результат: OK
- 2026-01-03T22:44:39+03:00 — Действие: Старт следующей фазы: подготовил командный файл для `?scale=managed&debug=1`, исправил прижим футера к низу, добавил 8‑й таб (reserve) для Content, поправил позиционирование user menu, включил тестовый режим для Roadmap/Audit (плейсхолдеры + ERR в венке). Файлы: `docs/iterations/ui-scale-normalization-v2.3.1/commands/README.md`, `styles/red-protocol-overrides.css`, `components/content/CategoryStats.tsx`, `components/content/category-stats.css`, `lib/contentStats.ts`, `components/icons/index.ts`, `app/routes/dashboard/content/_layout.tsx`, `components/UserMenuDropdown.tsx`, `lib/featureFlags.ts`, `app/routes/dashboard/page.tsx`, `app/routes/dashboard/audit/index.tsx`, `app/routes/dashboard/roadmap/index.tsx`, `components/RouteHoldBanner.tsx`. → Результат: OK
- 2026-01-04T00:43:10+03:00 — Действие: Переделал кнопку пользователя под референс (аватар + имя/роль, раскрытие сверху вниз), обновил стили меню (иконки, компактные пункты), убрал переключатель языка из topbar, убрал min-height у контента для корректного футера. Файлы: `app/routes/_layout.tsx`, `components/UserMenuDropdown.tsx`, `styles/red-protocol-overrides.css`. → Результат: OK
- 2026-01-04T00:43:10+03:00 — Действие: Удалил неиспользуемые HTML‑пакеты Audit/Roadmap из public‑data (разделы отключены). Файлы: `public/data/audits/17.13.AUDIT_AXIOM_DEMO_UI.10.10.25.html`, `public/data/audits/2025-09-06__audit-demo.html`, `public/data/roadmap/index.html`. → Результат: OK
- 2026-01-04T01:13:44+03:00 — Действие: Уточнил позиционирование user menu с учетом legacy‑zoom, добавил компенсацию высоты страницы в legacy и ограничил размер венков внутри карточек. Файлы: `components/UserMenuDropdown.tsx`, `styles/red-protocol-overrides.css`, `styles/app.css`, `styles/counter-wreath.css`. → Результат: OK
- 2026-01-04T14:51:06+03:00 — Действие: Перевёл user menu на anchored‑позиционирование относительно topbar (без scale-математики) и закрепил квадратные контейнеры венков (aspect-ratio, ring-size, resize по min-измерению). Файлы: `components/UserMenuDropdown.tsx`, `styles/app.css`, `styles/red-protocol-overrides.css`, `styles/counter-wreath.css`, `components/counters/wreath.ts`. → Результат: OK
- 2026-01-04T15:13:15+03:00 — Действие: Убрал фиксированный размер венков в dashboard и сделал `size` опциональным в `CounterWreath` (чтобы ring-size управлялся CSS). Файлы: `app/routes/dashboard/page.tsx`, `components/counters/CounterWreath.tsx`. → Результат: OK
- 2026-01-04T15:25:36+03:00 — Действие: Сократил зазор между кольцами венка (уменьшил `bandGapK`). Файл: `components/counters/wreath.ts`. → Результат: OK
- 2026-01-04T15:45:55+03:00 — Действие: Привязал размер canvas венка к layout‑боксу (offset/client) вместо `getBoundingClientRect`, чтобы не было рассинхрона под legacy zoom. Файл: `components/counters/wreath.ts`. → Результат: OK
- 2026-01-04T16:45:31+03:00 — Действие: Убрал жёсткий min‑size у грида венков, чтобы блок не выходил за границы панели при узком layout. Файл: `styles/app.css`. → Результат: OK
- 2026-01-04T17:27:52+03:00 — Действие: Привязал halo‑кольцо к фактическому размеру венка (100%), чтобы на узких масштабах не было рассинхрона `--ring-size` и пропажи анимации. Файл: `styles/counter-wreath.css`. → Результат: OK
- 2026-01-04T17:42:06+03:00 — Действие: Включил постоянную пульсацию halo для dashboard‑венков (с усилением на hover). Файл: `styles/counter-wreath.css`. → Результат: OK
- 2026-01-04T18:01:29+03:00 — Действие: Усилил keyframes halo (opacity + scale), чтобы пульсация была видимой на всех масштабах. Файл: `styles/counter-wreath.css`. → Результат: OK
- 2026-01-04T18:14:53+03:00 — Действие: Усилил амплитуду пульсации halo (scale/opacity/box-shadow), чтобы эффект был заметным. Файл: `styles/counter-wreath.css`. → Результат: OK
- 2026-01-04T18:30:04+03:00 — Действие: Отключил постоянную пульсацию halo; оставил анимацию только на hover. Файл: `styles/counter-wreath.css`. → Результат: OK
- 2026-01-04T19:22:30+03:00 — Действие: Исправил ошибки typecheck (CategoryStats: корректный вызов handleActivate; CounterWreath: условная передача ringSize; ReaderMenuLayer: безопасный доступ к touch). Файлы: `components/content/CategoryStats.tsx`, `components/counters/CounterWreath.tsx`, `src/features/content/components/ReaderMenuLayer.tsx`. → Результат: OK

## Step C — Documentation
- 2025-12-22T19:58:18+03:00 — Действие: Создал архитектурный spec по отказу от html-zoom и нормализации масштаба: `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`. Добавил ссылку в BUG-006. → Результат: OK
- 2025-12-22T20:21:53+03:00: Действие: Углубил spec (v0.2): базовая рамка 1920x1080, раздельные масштабы density/viewport, canvas-архитектура, portal-стратегия, data-layout, расширенный roadmap/QA. → Результат: OK
- 2025-12-29T14:56:13+03:00 — Действие: Создал директорию для baseline-скриншотов и README с неймингом: `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/`. Обновил spec чеклист. → Результат: OK
- 2025-12-29T16:23:33+03:00 — Действие: Описал каждый baseline-скриншот (описание/замечания/баги) и зафиксировал способ просмотра через viewer Codex в `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/README.md`. → Результат: OK
- 2025-12-29T20:29:30+03:00 — Действие: Добавлены baseline-скриншоты для UI масштаба в `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/`. → Результат: OK
- 2025-12-29T20:29:30+03:00 — Действие: Добавлена новость о полном реворке вкладок Audit/Roadmap в `public/data/news/manifest.json` + `public/data/news/items/2025-12-29-audit-roadmap-rework.md`. → Результат: OK
- 2025-12-29T17:04:42+03:00 — Действие: Выполнена инвентаризация масштабов (глобальный zoom, токены, локальные preview/doc zoom) и добавлена карта файлов/механизмов в `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`. → Результат: OK
- 2025-12-29T18:12:01+03:00 — Действие: Добавил карту layout/порталов (DOM корни, контейнеры, portal-узлы) и вывод по переносу `#modal-root` внутрь canvas в `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`. → Результат: OK
- 2025-12-29T18:36:35+03:00 — Действие: Зафиксировал точки внедрения Phase 1 (файлы и узлы для Scale Manager/canvas/portal) в `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`. → Результат: OK
- 2025-12-29T19:27:44+03:00 — Действие: Уточнил модель scale‑переменных (density vs composed) в `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`. → Результат: OK
- 2025-12-29T23:41:22+03:00 — Действие: Добавил пакет скриншотов регрессии managed‑масштаба (12.29) и описания к ним. Файлы: `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/README.md`, `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/12.29/*.png`. → Результат: OK
- 2026-01-03T20:52:37+03:00 — Действие: Зафиксировал условия съемки скриншотов (Windows scale 150% vs текущие проверки 125%) для корректного сравнения. Файл: `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/README.md`. → Результат: OK
- 2026-01-03T22:44:39+03:00 — Действие: Добавил директорию с командами и базовый URL для включения managed+debug. Файл: `docs/iterations/ui-scale-normalization-v2.3.1/commands/README.md`. → Результат: OK
- 2026-01-04T01:41:07+03:00 — Действие: Добавлены скриншоты 01.04 и описания багов (menu/wreath overflow) в README скринов. Файлы: `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/01.04/*.png`, `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/README.md`. → Результат: OK
- 2026-01-04T14:41:40+03:00 — Действие: Создан системный `AGENTS.md` с общими правилами адаптации и процесса работы (общение, логирование, QA, коммиты, карта проекта). Файл: `AGENTS.md`. → Результат: OK
- 2026-01-04T14:54:05+03:00 — Действие: Расширен `AGENTS.md` для долгосрочных автономных сессий и детальной архитектуры проекта. Файл: `AGENTS.md`. → Результат: OK

## Step D — QA
- 2026-01-10T18:22:51+03:00 — Действие: Проверка превью и debug‑значений после усиления типографики не выполнялась (нужны скрины с `?debug=1`). → Результат: SKIP
- 2026-01-10T17:49:19+03:00 — Действие: Проверка превью на fullscreen/windowed после корректировки масштаба не выполнялась (нужны скрины с `?debug=1`). → Результат: SKIP
- 2026-01-10T16:43:47+03:00 — Действие: Проверка превью на fullscreen/windowed после масштабирования типографики не выполнялась (нужны скрины с `?debug=1`). → Результат: SKIP
- 2026-01-10T15:50:31+03:00 — Действие: Проверка превью на fullscreen/windowed после правок не выполнялась (нужны скрины с `?debug=1`). → Результат: SKIP
- 2026-01-07T19:17:50+03:00 — Действие: По фидбэку CREATOR — windowed vs fullscreen в managed совпадают, «обрезание» устранено. → Результат: PASS
- 2026-01-07T19:10:45+03:00 — Действие: Проверка windowed/FS после смягчения shrink‑условия не выполнялась (нужен повторный скрин с `?debug=1`). → Результат: SKIP
- 2026-01-07T18:37:10+03:00 — Действие: Проверка windowed/FS после компенсации высоты в managed не выполнялась (нужны скрины с `?debug=1`). → Результат: SKIP
- 2026-01-07T17:19:22+03:00 — Действие: Проверка порогового viewport‑scale (>=70% базы без масштабирования) не выполнялась (нужны скрины with‑chrome и windowed с `?debug=1`). → Результат: SKIP
- 2026-01-05T18:38:54+03:00 — Действие: Проверка with‑chrome/FS после гибридного расчёта viewport‑scale не выполнялась (нужны скрины с `?debug=1`). → Результат: SKIP
- 2026-01-05T18:06:54+03:00 — Действие: Проверка status‑footer в windowed после компенсации высоты не выполнялась (нужен скрин с `?debug=1`). → Результат: SKIP
- 2026-01-05T17:55:51+03:00 — Действие: Проверка managed‑масштаба после учета DPR не выполнялась (нужны FS‑скрины всех вкладок с `?debug=1`). → Результат: SKIP
- 2026-01-05T17:08:12+03:00 — Действие: Проверка дефолтного managed и legacy‑переключения не выполнялась (нужны скрины с `?debug=1` и `?scale=legacy&debug=1`). → Результат: SKIP
- 2026-01-05T16:33:17+03:00 — Действие: Проверка windowed/FS после правки legacy‑масштаба не выполнялась (нужны новые скрины с `?debug=1`). → Результат: SKIP
- 2026-01-05T14:59:03+03:00 — Действие: Ручная проверка `/dashboard/content` после обновления превью не выполнена (нужны свежие скрины с `?debug=1`). → Результат: SKIP
- 2025-12-20T20:44:20+03:00 — Действие: Ручная проверка BUG-003 в UI (локал): меню всё ещё открывается от верхней точки, фон полностью залочен (нет скролла страницы при открытом меню). Подозрение: жёсткий scroll-lock `body { position: fixed }` + меню фиксировано к top header; различие между scroll документа и вложенного HTML контента. → Результат: FAIL (требуется доработка)
- 2025-12-20T20:55:00+03:00 — Действие: Вторая проверка после снятия scroll-lock: скролл доступен, но меню остаётся привязано к верхней части и перекрывает header; overlay не отделён от шапки. → Результат: FAIL
- 2025-12-22T18:01:42+03:00 — Действие: Проверка текущей сборки: меню открывается из любой точки, header кликается, overlay корректен; проблема осталась — при открытом меню не скроллится основной HTML-контент под overlay. → Результат: FAIL (нужен фикс прокрутки при active menu)
- 2025-12-22T18:21:32+03:00 — Действие: Финальная проверка (по фидбэку пользователя): меню, overlay и скролл HTML-контента работают корректно при открытом меню. BUG-003 закрыт как DONE. → Результат: PASS
- 2025-12-29T23:32:23+03:00 — Действие: UI‑проверка managed‑режима после фикса `transform-origin` не выполнялась (требуется ручной визуальный чек). → Результат: SKIP
- 2025-12-30T00:11:24+03:00 — Действие: Проверка анимации news ticker после фикса не выполнялась (нужен ручной визуальный чек). → Результат: SKIP
- 2025-12-30T00:27:04+03:00 — Действие: Проверка News Wire после правки высоты viewport не выполнялась (нужен ручной визуальный чек). → Результат: SKIP
- 2025-12-30T00:30:54+03:00 — Действие: Ручная проверка News Wire после фикса — лента активна, анимация работает. → Результат: PASS
- 2026-01-03T20:48:08+03:00 — Действие: Проверка debug‑оверлея (`?debug=1`) не выполнялась (нужен ручной визуальный чек). → Результат: SKIP
- 2026-01-04T01:13:44+03:00 — Действие: Проверка футера/меню/венков на разных разрешениях не выполнялась (нужен ручной визуальный чек). → Результат: SKIP
- 2026-01-04T01:41:07+03:00 — Действие: По фидбэку (01.04) — футер исправлен, меню и венки не исправлены; требуется доработка по позиционированию меню и размеру венков. → Результат: FAIL
- 2026-01-04T14:51:06+03:00 — Действие: Ручная проверка menu/wreath после фикса не выполнялась (нужен новый скрин с `?debug=1`). → Результат: SKIP
- 2026-01-04T15:13:15+03:00 — Действие: Ручная проверка корректности размеров венков после снятия `size` не выполнялась. → Результат: SKIP
- 2026-01-04T15:25:36+03:00 — Действие: По фидбэку CREATOR меню исправлено. → Результат: PASS
- 2026-01-04T15:25:36+03:00 — Действие: Проверка зазора внешнего кольца венка после правки не выполнялась (нужен скрин). → Результат: SKIP
- 2026-01-04T15:45:55+03:00 — Действие: Проверка совпадения размеров canvas/контейнера венка после правки не выполнялась (нужен скрин). → Результат: SKIP
- 2026-01-04T16:45:31+03:00 — Действие: По фидбэку CREATOR — венок исправлен. → Результат: PASS
- 2026-01-04T16:45:31+03:00 — Действие: Проверка панели status после правки грида венков не выполнялась (нужен скрин). → Результат: SKIP
- 2026-01-04T17:27:52+03:00 — Действие: Проверка 3-го круга венка на средних/малых масштабах после правки halo не выполнялась (нужен скрин). → Результат: SKIP
- 2026-01-04T17:42:06+03:00 — Действие: Проверка пульсации 3-го круга после включения постоянной анимации не выполнялась (нужен скрин). → Результат: SKIP
- 2026-01-04T18:01:29+03:00 — Действие: Проверка усиленной пульсации 3-го круга после правки keyframes не выполнялась (нужен скрин). → Результат: SKIP
- 2026-01-04T18:14:53+03:00 — Действие: Проверка пульсации после усиления амплитуды не выполнялась (нужен скрин). → Результат: SKIP
- 2026-01-04T18:30:04+03:00 — Действие: По фидбэку CREATOR — пульсация 3-го круга работает и активна только на hover. → Результат: PASS
- 2026-01-04T18:30:04+03:00 — Действие: По фидбэку CREATOR — баги вкладки `/dashboard` закрыты. → Результат: PASS
- 2026-01-04T17:49:24+03:00 — Действие: По фидбэку CREATOR — баг панели status закрыт. → Результат: PASS
- 2026-01-03T21:00:05+03:00 — Действие: Проверка плотности managed‑масштаба (0.648) не выполнялась (нужен визуальный чек с `?scale=managed&debug=1`). → Результат: SKIP
- 2026-01-03T22:44:39+03:00 — Действие: Проверка футера, позиционирования user menu, reserve‑таба и плейсхолдеров Roadmap/Audit не выполнялась (нужен визуальный чек). → Результат: SKIP
- 2026-01-04T19:22:30+03:00 — Действие: Локальный typecheck не выполнен: `npm run typecheck`/`./node_modules/.bin/tsc --noEmit` не стартует в WSL (нет `node`). → Результат: SKIP

## Step E — Git
- 2026-01-10T17:52:34+03:00 — Commit: `d1ba59a` — `fix(content): boost preview text density` — Files: `lib/ui/scaleManager.ts`, `styles/content-hub-v2.css`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-10T16:45:12+03:00 — Commit: `ac9ce52` — `fix(content): adapt preview typography scale` — Files: `lib/ui/scaleManager.ts`, `styles/content-hub-v2.css`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-10T15:52:30+03:00 — Commit: `a6a5cad` — `fix(content): balance preview card layout` — Files: `styles/content-hub-v2.css`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-07T19:12:04+03:00 — Commit: `8df3ca6` — `fix(scale): relax managed shrink gating` — Files: `lib/ui/scaleManager.ts`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-07T18:39:52+03:00 — Commit: `858e845` — `fix(scale): stabilize full-height in managed` — Files: `styles/app.css`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-07T17:24:12+03:00 — Commit: `fc58db0` — `fix(scale): gate managed viewport shrink` — Files: `lib/ui/scaleManager.ts`, `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/README.md`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-05T18:19:01+03:00 — Commit: `b9da860` — `fix(scale): align managed viewport height` — Files: `lib/ui/scaleManager.ts`, `styles/red-protocol-overrides.css`
- 2026-01-05T17:12:53+03:00 — Commit: `e7eb2cb` — `fix(scale): default to managed and expand commands` — Files: `lib/ui/scaleManager.ts`, `docs/iterations/ui-scale-normalization-v2.3.1/commands/README.md`
- 2026-01-05T16:39:02+03:00 — Commit: `6978bc5` — `fix(scale): soften legacy windowed shrink` — Files: `styles/app.css`
- 2026-01-05T16:00:49+03:00 — Commit: `797ac92` — `fix(content): expand preview layout and accents` — Files: `src/features/content/components/ContentPreview.tsx`, `styles/content-hub-v2.css`
- 2026-01-05T15:06:59+03:00 — Commit: `4e249b5` — `fix(content): align preview data and density` — Files: `app/routes/dashboard/content/ContentCategoryView.tsx`, `src/features/content/components/ContentPreview.tsx`, `styles/content-hub-v2.css`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-05T14:40:29+03:00 — Commit: `02afc92` — `docs(assets): add 01.05 content hub screenshots` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`, `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/README.md`, `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/01.05/*.png`
- 2026-01-04T19:22:30+03:00 — Commit: `f007200` — `fix(types): resolve typecheck errors` — Files: `components/content/CategoryStats.tsx`, `components/counters/CounterWreath.tsx`, `src/features/content/components/ReaderMenuLayer.tsx`
- 2025-12-20T20:39:16+03:00 — Commit: `73924d8` — `fix(reader-menu): fix overlay positioning and lock scroll` — Files: `src/features/content/pages/ReaderPage.tsx`, `styles/content-hub-v2.css`, `docs/bugs/BUG-003_reader-overlay-menu-scroll.md`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2025-12-20T21:25:30+03:00 — Commit: `a04d710` — `chore(reader-menu): refactor layer component and fix ts error (BUG-003 wip)` — Files: `src/features/content/components/ReaderMenuLayer.tsx`, `src/features/content/pages/ReaderPage.tsx`, `styles/content-hub-v2.css`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2025-12-20T21:40:58+03:00 — Commit: `2e1abe9` — `chore(reader-menu): update props for ts strict mode (BUG-003 still open)` — Files: `src/features/content/pages/ReaderPage.tsx`, `src/features/content/components/ReaderMenuLayer.tsx`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2025-12-22T17:09:58+03:00 — Commit: `7790519` — `chore(reader-menu): add scroll container and refine layer bounds (BUG-003 wip)` — Files: `src/features/content/pages/ReaderPage.tsx`, `src/features/content/components/ReaderMenuLayer.tsx`, `styles/content-hub-v2.css`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2025-12-22T18:02:35+03:00 — Commit: `1e4bd1f` — `chore(reader-menu): stabilize header sizing and layer bounds` — Files: `src/features/content/components/ReaderMenuLayer.tsx`, `styles/content-hub-v2.css`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md` (BUG-003 остаётся OPEN)
- 2025-12-22T18:21:32+03:00 — Commit: `080a699` — `fix(reader-menu): congratulations!!! BUG-003 resolved` — Files: `src/features/content/components/ReaderMenuLayer.tsx`
- 2025-12-22T19:39:43+03:00 — Commit: `bafeb97` — `fix(favorites): avoid legacy migration recursion` — Files: `lib/identity/favoritesService.ts`
- 2025-12-22T19:41:04+03:00 — Commit: `f24fc60` — `chore(bugs): start BUG-006 scale parity investigation` — Files: `styles/app.css`, `docs/bugs/BUG-006_scale-parity-windowed.md`, `docs/bugs/00_BUG_INDEX.md`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2025-12-29T15:40:14+03:00 — Commit: `ae23c6b` — `docs(assets): add baseline UI scale screenshots` — Files: `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/*.png`
- 2025-12-29T15:41:15+03:00 — Commit: `2fe9d95` — `feat(news): announce audit/roadmap rework` — Files: `public/data/news/manifest.json`, `public/data/news/items/2025-12-29-audit-roadmap-rework.md`
- 2025-12-29T16:29:20+03:00 — Commit: `9d0d5bf` — `docs(assets): annotate baseline screenshots` — Files: `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/README.md`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2025-12-29T16:33:22+03:00 — Commit: `758d093` — `chore(agent-ops): log screenshot annotations` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2025-12-29T17:47:31+03:00 — Commit: `3379468` — `docs(spec): map scale touchpoints` — Files: `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2025-12-29T18:26:07+03:00 — Commit: `fbb55aa` — `docs(spec): map layout and portal roots` — Files: `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2025-12-29T18:39:15+03:00 — Commit: `02ba452` — `docs(spec): add phase 1 touchpoints` — Files: `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2025-12-29T19:10:32+03:00 — Commit: `9c372f8` — `chore(ticker): rename viewport class` — Files: `components/news/HeadlinesTicker.tsx`, `styles/ticker.css`
- 2025-12-29T19:15:17+03:00 — Commit: `daf67ea` — `feat(ui): add scale viewport root` — Files: `components/ScaleViewport.tsx`, `components/UserMenuDropdown.tsx`, `components/Modal.tsx`, `src/features/content/components/ReaderMenuLayer.tsx`
- 2025-12-29T19:25:50+03:00 — Commit: `de8b766` — `feat(scale): add scale manager and canvas wrapper` — Files: `lib/ui/scaleManager.ts`, `app/main.tsx`, `styles/app.css`
- 2025-12-29T19:27:44+03:00 — Commit: `eb5feaf` — `docs(spec): clarify scale variables` — Files: `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`
- 2025-12-29T19:37:11+03:00 — Commit: `f1840a7` — `chore(agent-ops): log scale phase 1 work` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2025-12-29T19:40:29+03:00 — Commit: `1a1124f` — `chore(agent-ops): log scale phase 1 commit` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2025-12-29T20:14:13+03:00 — Commit: `09abecf` — `fix(scale): avoid ax-viewport collision` — Files: `components/ScaleViewport.tsx`, `styles/app.css`, `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`
- 2025-12-29T23:34:40+03:00 — Commit: `70a48b5` — `fix(scale): center managed canvas` — Files: `styles/app.css`
- 2025-12-29T23:41:51+03:00 — Commit: `416fdb8` — `fix(scale): default to legacy mode` — Files: `lib/ui/scaleManager.ts`, `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`
- 2025-12-29T23:41:51+03:00 — Commit: `a524231` — `docs(assets): add managed regression screenshots` — Files: `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/README.md`, `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/12.29/*.png`
- 2025-12-30T00:12:20+03:00 — Commit: `9c6cf99` — `fix(ticker): stabilize headlines animation` — Files: `components/news/HeadlinesTicker.tsx`
- 2025-12-30T00:29:20+03:00 — Commit: `d6dc5a8` — `fix(ticker): set viewport height` — Files: `styles/ticker.css`
- 2026-01-03T20:50:19+03:00 — Commit: `af07cd3` — `feat(scale): add debug overlay` — Files: `components/ScaleDebug.tsx`, `components/ScaleViewport.tsx`, `lib/ui/scaleManager.ts`, `styles/app.css`
- 2026-01-03T20:50:19+03:00 — Commit: `65d1b7c` — `chore(agent-ops): log scale debug overlay` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-03T20:54:07+03:00 — Commit: `8f579e5` — `docs(assets): note screenshot scaling context` — Files: `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/README.md`
- 2026-01-03T21:02:24+03:00 — Commit: `62d4ebd` — `fix(scale): match managed density to legacy` — Files: `lib/ui/scaleManager.ts`, `styles/app.css`, `docs/iterations/ui-scale-normalization-v2.3.1/spec.md`
- 2026-01-03T23:05:33+03:00 — Commit: `1ed0b18` — `docs(scale): add debug command list` — Files: `docs/iterations/ui-scale-normalization-v2.3.1/commands/README.md`
- 2026-01-03T23:07:12+03:00 — Commit: `d7274c7` — `feat(content): add reserve tab placeholder` — Files: `app/routes/dashboard/content/_layout.tsx`, `components/content/CategoryStats.tsx`, `components/content/category-stats.css`, `components/icons/index.ts`, `lib/contentStats.ts`
- 2026-01-03T23:09:19+03:00 — Commit: `90b9d73` — `fix(layout): pin footer and align user menu` — Files: `components/UserMenuDropdown.tsx`, `styles/red-protocol-overrides.css`
- 2026-01-03T23:10:54+03:00 — Commit: `95f9852` — `feat(maintenance): disable audit and roadmap` — Files: `app/routes/dashboard/audit/index.tsx`, `app/routes/dashboard/page.tsx`, `app/routes/dashboard/roadmap/index.tsx`, `components/RouteHoldBanner.tsx`, `lib/featureFlags.ts`, `styles/red-protocol-overrides.css`
- 2026-01-04T00:42:04+03:00 — Commit: `7c80577` — `chore(data): remove disabled audit and roadmap html` — Files: `public/data/audits/17.13.AUDIT_AXIOM_DEMO_UI.10.10.25.html`, `public/data/audits/2025-09-06__audit-demo.html`, `public/data/roadmap/index.html`
- 2026-01-04T00:42:46+03:00 — Commit: `ad96650` — `fix(ui): refine user menu trigger and footer` — Files: `app/routes/_layout.tsx`, `components/UserMenuDropdown.tsx`, `styles/red-protocol-overrides.css`
- 2026-01-04T01:13:44+03:00 — Commit: `c96f8ae` — `fix(ui): stabilize footer, menu, and wreaths` — Files: `components/UserMenuDropdown.tsx`, `styles/red-protocol-overrides.css`, `styles/app.css`, `styles/counter-wreath.css`
- 2026-01-04T01:43:16+03:00 — Commit: `6c56188` — `docs(assets): add 01.04 bug screenshots` — Files: `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/01.04/2026-01-04_1675x1011_home-broken-div.ax-user-menu.png`, `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/01.04/2026-01-04_1675x1011_home-broken-div.ax-wreath.ax-dashboard__wreath.png`, `docs/iterations/ui-scale-normalization-v2.3.1/assets/screenshots/README.md`
- 2026-01-04T01:44:45+03:00 — Commit: `67c7fd8` — `chore(agent-ops): log 01.04 bug review` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-04T14:54:47+03:00 — Commit: `58e2e58` — `fix(ui): anchor user menu and square wreaths` — Files: `components/UserMenuDropdown.tsx`, `components/counters/wreath.ts`, `styles/app.css`, `styles/counter-wreath.css`, `styles/red-protocol-overrides.css`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-04T15:14:33+03:00 — Commit: `ef2df0f` — `fix(ui): make wreath sizing responsive` — Files: `app/routes/dashboard/page.tsx`, `components/counters/CounterWreath.tsx`
- 2026-01-04T14:41:40+03:00 — Commit: `6866d20` — `docs(agents): add general onboarding guide` — Files: `AGENTS.md`
- 2026-01-04T15:25:36+03:00 — Commit: `93d215a` — `fix(ui): reduce wreath ring gap` — Files: `components/counters/wreath.ts`
- 2026-01-04T15:25:36+03:00 — Commit: `a159fa5` — `chore(agent-ops): log menu pass and wreath gap tweak` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-04T15:14:33+03:00 — Commit: `5367a23` — `chore(agent-ops): log wreath sizing update` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-04T15:47:10+03:00 — Commit: `6a79f8d` — `fix(ui): sync wreath canvas sizing` — Files: `components/counters/wreath.ts`
- 2026-01-04T15:49:58+03:00 — Commit: `fbe4e63` — `chore(agent-ops): log wreath canvas sizing fix` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-04T16:48:39+03:00 — Commit: `b4eac15` — `fix(ui): prevent status wreath overflow` — Files: `styles/app.css`
- 2026-01-04T16:48:39+03:00 — Commit: `093895a` — `chore(agent-ops): log status panel fix` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-04T17:30:25+03:00 — Commit: `f4a924b` — `fix(ui): scale wreath halo to element size` — Files: `styles/counter-wreath.css`
- 2026-01-04T17:30:25+03:00 — Commit: `663a728` — `chore(agent-ops): log wreath halo fix` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-04T17:45:16+03:00 — Commit: `2d3c314` — `chore(agent-ops): log wreath canvas sizing commit` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-04T17:45:16+03:00 — Commit: `1704f6c` — `chore(agent-ops): log status panel commits` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-04T17:45:16+03:00 — Commit: `57eb880` — `chore(agent-ops): log wreath halo commits` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-04T17:45:16+03:00 — Commit: `6eeb1e0` — `fix(ui): restore wreath pulse animation` — Files: `styles/counter-wreath.css`
- 2026-01-04T17:45:16+03:00 — Commit: `a03d577` — `chore(agent-ops): log wreath pulse fix` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-04T17:49:24+03:00 — Commit: `6d756d3` — `chore(agent-ops): log recent wreath commits` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-04T17:49:24+03:00 — Commit: `ad4efff` — `chore(agent-ops): log status panel pass` — Files: `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-04T18:17:07+03:00 — Commit: `444d149` — `fix(ui): intensify wreath pulse` — Files: `styles/counter-wreath.css`, `docs/agent_ops/logs/0005_bugfix-v2.3.1-bugs-sweep.md`
- 2026-01-04T18:30:19+03:00 — Commit: `d32eb01` — `fix(ui): limit wreath halo pulse to hover` — Files: `styles/counter-wreath.css`

---

## Notes / Decisions
- Основной источник задач — `docs/bugs` индекс и карточки; фиксация статусов и приоритетов в SPEC.
- Работы командные, без самовольных фиксов — нужно соблюдать процесс (repro, owner, статус, ссылки на PR/коммиты).

## Risks / Open Points
- Требуется реальное пользовательское поведение для валидации UI; автоматически не подтвердить UX регрессии.

## Acceptance Checklist
- [ ] SPEC итерации создан с целями/объемом, процессом и чеклистом
- [ ] Лог 0005 ведётся и ссылка на SPEC актуальна
- [ ] Чеклист багов/фикс-сессий добавлен
