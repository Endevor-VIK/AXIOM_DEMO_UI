# ax-design/compat — README\_TEMP.md

**Назначение:** временный совместимый слой ("строительные леса") для переноса визуальной ДНК локальных стилей AXIOM (QSS/CSS/IDE) в веб‑ядро. Папка служит **референсом**, а не боевым кодом. После миграции — **удаляется**.

**Статус:** DRAFT v0.2
**Владелец:** AXIOM WEB CORE
**Ветвь по умолчанию:** `feature/ax-ui-v0.2`

---

## 1) Что внутри

* `axiom_style.qss` — базовые стили главного окна (радиусы, бордеры, фоновые слои, карточки).
* `axiom_chrome.qss` — оформление системной шапки/окна (title bar, кнопки окна, контуры).
* `axiom_red.qss` — эталон логина (RED PROTOCOL): кнопки/инпуты/акцентные градиенты.
* `axiom-custom.css` — IDE‑оверлей (VS Code): цветовая палитра и контраст, как в локальной среде.
* `settings.json` — источник токенов (цвета, шрифты, акценты) из IDE.
* `login_window.py` — поведение/состояния для логина (фокус, актив, микрошаги).
* `ref_html_03.01_VIKTOR.md` — образец HTML‑разметки и визуальных паттернов (cover/split, статус‑«пилюли», клин‑делители).

> Эти файлы **не подключаются** в прод‑бандл сайта. Они используются как источник истины для токенов и компонентов.

---

## 2) Куда это маппится в веб‑ядре

**Файлы целевого веб‑слоя:**

* `ax-design/tokens.css` — системные токены (цвета, радиусы, тени, тайминги).
* `ax-design/components.css` — унифицированные компоненты:

  * `.ax-chip` — статус‑пилюли (ECHELON · LEVEL 02 / ACCELERATOR: ONLINE / NIGHTMARE: ARMED)
  * `.ax-blade-head` — «лезвийные» заголовки секций (Ключевые маркеры / Визуальные акценты)
  * `.ax-hr-blade` — клин‑делители (острые края с обеих сторон)
  * `.ax-cover-*` — шапочные плашки/треки (микро‑«дыхание» градиента)

**Базовые соответствия токенов:**

| Источник (QSS/CSS/IDE)     | Токен сайта        | Примечание                               |
| -------------------------- | ------------------ | ---------------------------------------- |
| IDE `editor.background`    | `--ax-bg`          | Базовый фон (#0c0d11)                    |
| IDE/RED `panel.background` | `--ax-ink`         | Тёмный красный стеклянный фон (#10090c)  |
| RED accent                 | `--ax-red`         | Главный акцент (#ff2034)                 |
| RED deep                   | `--ax-red-2`       | Глубокий акцент/бордер (#b10f1e)         |
| RED shadow                 | `--ax-red-3`       | Тени/границы (#5a0a12)                   |
| Текст (светлый)            | `--ax-text`        | Основной текст/чипы                      |
| Текст вторичный            | `--ax-muted`       | Подписи/метки                            |
| Бордер нейтральный         | `--ax-border`      | Лёгкие границы/делители                  |
| Радиусы (кнопка/карта)     | `--r-lg`/`--r-2xl` | 14px / 24px                              |
| Анимации                   | `--t-fast/--t-std` | 120ms / 220ms (cubic‑bezier(.16,1,.3,1)) |

> При расхождениях приоритет у локального эталона (axiom\_red.qss для логина, затем axiom\_style.qss для остального), но итоговая палитра должна совпадать с IDE‑оверлеем.

---

## 3) Политика импорта (Guardrails)

* `compat/*` **никогда** не импортируется в приложение. Допустимы только `tokens.css` и `components.css`.
* В `vite.config` добавлен exclude‑паттерн для `compat/**` при сборке.
* Любые правки в `compat/*` требуют update‑коммита в `tokens.css`/`components.css` (см. рабочий цикл ниже).

**Commit‑префиксы:**

* `compat:` — изменения внутри папки совместимости
* `tokens:` — правки токенов (цвета, радиусы, etc.)
* `ui:` — компоненты/разметка
* `docs:` — обновление этого README

---

## 4) Рабочий цикл (как агенту действовать)

1. **Синхронизация**

   * Считать изменения из `compat/*.qss|.css|.json|.py`.
   * Обновить токены в `ax-design/tokens.css` по таблице соответствий.
2. **Компоненты**

   * Проверить соответствие `.ax-chip`, `.ax-blade-head`, `.ax-hr-blade`, `.ax-cover-*` эталонам из `ref_html_03.01_VIKTOR.md` и QSS.
   * При необходимости обновить `ax-design/components.css` (без изменения API классов).
3. **Визуальные проверки** (см. §5): сделать скрин‑снэпшоты демо‑страницы и приложить к PR.
4. **Чистка**

   * Записать в журнал `MIGRATION_LOG` (см. §6) какие элементы перенесены.
   * По завершении фаз — удалить конкретные файлы из `compat/`.

> Все изменения проводить в ветке `feature/ax-ui-v0.2` и оформлять PR с чек‑листом (§7).

---

## 5) Acceptance / Parity (минимальные критерии)

* **Цвет/контраст:** визуальное совпадение с IDE‑скринами (∆E по ощущениям ≤ 5, контраст WCAG AA для текста ≥ 4.5:1).
* **Пилюли (.ax-chip):** одинаковые отступы, радиус ≈ 999px, лёгкий внутренний glow на hover, короткий sweep на active (< 300ms).
* **Заголовки (.ax-blade-head):** подчёркивание‑клин (градиент справа «срезан»). Межстрочный интервал = 1.0–1.1, верхний регистр, letter‑spacing ≈ .08em.
* **Делители (.ax-hr-blade):** оба конца заострены (без SVG), толщина 2px, не перекрывает контент для a11y.
* **Cover‑bar (.ax-cover-\*)**: микродвижение градиента на hover, чёткий focus‑outline 2px.
* **Фокус/клавиатура:** все интерактивные элементы доступны и заметны при tab‑навигации.

---

## 6) MIGRATION\_LOG (шаблон)

```md
### Миграция №N — дата
- Источник: compat/axiom_red.qss (кнопки/инпуты)
- Перенесено: tokens (—ax-red, —ax-border), components (.ax-chip)
- Веб‑эквивалент: ax-design/tokens.css, ax-design/components.css
- Проверка: скрин демо‑страницы, ссылка на PR
- Статус: ✅ завершено / ⏳ в работе
```

---

## 7) PR‑чек‑лист для агента

* [ ] Изменения ограничены веткой `feature/ax-ui-v0.2`.
* [ ] `compat/*` не импортируется ни в одном модуле.
* [ ] Обновлены `tokens.css` и/или `components.css` согласно источникам.
* [ ] Демо‑страница с `.ax-chip`, `.ax-blade-head`, `.ax-hr-blade`, `.ax-cover-*` обновлена.
* [ ] Приложены скрины до/после (идеально — рядом).
* [ ] Обновлён `MIGRATION_LOG` в этом README.
* [ ] Пройдены базовые Lighthouse‑чеки (a11y ≥ 90, contrast OK).

---

## 8) Что можно и что нельзя

**Можно:**

* Использовать файлы в `compat/` только как референс.
* Дополнять `tokens.css`/`components.css` новыми переменными/классами, если их источник есть в `compat/`.
* Вносить минимальные UX‑улучшения (контраст, фокус), если они не меняют визуальную ДНК.

**Нельзя:**

* Подключать `compat/*` в сборку или копировать файлы как есть в прод.
* Менять названия публичных классов без обсуждения (`.ax-chip`, `.ax-blade-head`, `.ax-hr-blade`, `.ax-cover-*`).
* Ослаблять контраст и убирать фокус‑индикацию.

---

## 9) Этапы удаления `compat/`

1. **F1:** все ключевые элементы перенесены (чипы, заголовки, делители, cover‑bar).
2. **F2:** страницы сайта используют только `tokens.css` и `components.css`.
3. **F3:** проведён финальный визуальный аудит (сверка по скринам).
4. **F4:** удалить `compat/*`, закрыть ветку, создать релиз‑тег.

---

## 10) Быстрый how‑to (для агента)

1. Открой `compat/*`, зафиксируй отличия с текущими токенами.
2. Синхронизируй `tokens.css`.
3. Проверь соответствие компонентов по демо‑странице.
4. Обнови `components.css` (минимально).
5. Добавь скрины/лог в PR и отметь чек‑лист.
6. Не импортируй `compat/*`.

---

*Этот README предназначен для ускорения переноса визуальной ДНК AXIOM из локальных QSS/CSS/IDE в унифицированный веб‑слой. После завершения миграции папка `compat/` удаляется.*
