/* styles/login-bg.css — minimal layered background for /login */

:root{
    /* простые ручки для дальнейшей настройки */
    --login-bg-grid-opacity: .0;     /* старт: без сетки */
    --login-bg-vignette-opacity: .22;
  }
  
  /* контейнер /login уже имеет position:relative */
  .ax-login__bg{ position:fixed; inset:0; z-index:0; pointer-events:none; contain: paint; overflow: hidden; isolation: isolate; }

  /* WebGL canvas background (Orion-inspired) */
  .ax-orion{
    position:absolute;
    inset:-6%;
    width:112%;
    height:112%;
    z-index:1;
    opacity:.92;
    filter: saturate(1.06) contrast(1.06);
    transform: translateZ(0);
  }

  .ax-login__bg-sky,
  .ax-login__bg-haze,
  .ax-login__bg-beams,
  .ax-login__x-scan{
    position:absolute; inset:0; pointer-events:none;
    z-index: 3;
  }

  .ax-login__bg-sky{
    background:
      radial-gradient(800px 420px at 20% 20%, rgba(255,255,255,.10), transparent 60%),
      radial-gradient(900px 520px at 80% 10%, rgba(255,32,52,.10), transparent 60%),
      linear-gradient(180deg, rgba(8,6,9,.96) 0%, rgba(10,7,10,.94) 55%, rgba(10,7,10,0) 100%);
    opacity:.78;
    z-index: 2;
  }

  .ax-login__bg-haze{
    background:
      radial-gradient(1200px 420px at 50% 115%, rgba(255,32,52,.22), transparent 60%),
      radial-gradient(900px 340px at 18% 100%, rgba(255,96,112,.12), transparent 70%);
    mix-blend-mode: screen;
    opacity:.52;
    animation: ax-haze-drift 20s ease-in-out infinite;
    z-index: 4;
  }

  .ax-login__bg-beams{
    background:
      linear-gradient(90deg, rgba(255,32,52,.10), transparent 35%) 10% 0/ 240px 100% no-repeat,
      linear-gradient(90deg, rgba(255,255,255,.10), transparent 40%) 70% 0/ 300px 100% no-repeat,
      linear-gradient(90deg, rgba(255,32,52,.08), transparent 45%) 42% 0/ 220px 100% no-repeat;
    opacity:.22;
    mix-blend-mode: screen;
    animation: ax-beams-sweep 18s ease-in-out infinite;
    z-index: 6;
  }

  /* Keep the "X" sweep effect (liked): two diagonal scan beams passing through. */
  .ax-login__x-scan{
    inset:-16%;
    background:
      linear-gradient(118deg,
        transparent 0 46%,
        rgba(255,32,52,.10) 47%,
        rgba(255,255,255,.09) 50%,
        rgba(255,32,52,.10) 53%,
        transparent 54% 100%),
      linear-gradient(62deg,
        transparent 0 46%,
        rgba(255,32,52,.08) 47%,
        rgba(255,255,255,.07) 50%,
        rgba(255,32,52,.08) 53%,
        transparent 54% 100%);
    opacity:.42;
    mix-blend-mode: screen;
    z-index: 5;
    animation: ax-x-sweep 10.5s ease-in-out infinite;
  }
  @keyframes ax-x-sweep{
    0%, 84%, 100%{ transform: translateX(-6%) translateY(-1%); opacity: .22; }
    88%{ transform: translateX(0) translateY(0); opacity: .52; }
    92%{ transform: translateX(6%) translateY(1%); opacity: .34; }
  }
  .ax-login.ax-glitch .ax-login__x-scan{
    opacity:.62;
    animation-duration: 8.5s;
  }
  
  /* БАЗА + ГЛУБИНА */
  .ax-login__bg::before{
    content:""; position:absolute; inset:0; z-index:0;
    background:
      radial-gradient(1200px 360px at 50% 112%, rgba(255,32,52,.10), transparent 60%),
      radial-gradient(1400px 700px at 85% 110%, #19060c 0%, transparent 55%),
      radial-gradient(900px 420px at 18% 8%, rgba(255,255,255,.08), transparent 60%),
      linear-gradient(135deg, var(--ax-bg) 70%, var(--ax-ink) 100%);
    filter: saturate(1.03);
  }

  /* vignette + subtle bottom glow (keep it calm; no constant noise here) */
  .ax-login__bg::after{
    content:""; position:absolute; inset:0; z-index: 7;
    background:
      radial-gradient(900px 420px at 50% 115%, rgba(255,32,52,.14), transparent 62%),
      radial-gradient(1100px 700px at 50% 70%, rgba(0,0,0,0) 0%, rgba(0,0,0,.46) 72%),
      linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.42));
    opacity:.88;
    mix-blend-mode: multiply;
  }
  @keyframes ax-haze-drift{
    0%, 100%{ transform: translateY(0); opacity:.6; }
    50%{ transform: translateY(-1.6%); opacity:.75; }
  }
  @keyframes ax-beams-sweep{
    0%, 100%{ transform: translateX(0); opacity:.35; }
    50%{ transform: translateX(2.5%); opacity:.55; }
  }
  /* keep small micro-glitch only on demand */
  .ax-login.ax-glitch .ax-login__bg::after{
    animation: ax-bg-glitch .18s steps(2) both;
  }
  @keyframes ax-bg-glitch{
    0%{ transform: translateX(0); }
    50%{ transform: translateX(-0.4%); }
    100%{ transform: translateX(0); }
  }
  
  /* опциональная сетка — просто включи класс .ax-login--grid на секции */
  .ax-login.ax-login--grid .ax-login__bg::after{
    background:
      linear-gradient(0deg, rgba(255,255,255,.03) 1px, transparent 1px) 0 0/100% 22px,
      linear-gradient(90deg, rgba(255,255,255,.03) 1px, transparent 1px) 0 0/22px 100%,
      radial-gradient(1200px 360px at 50% 115%, rgba(255,32,52,.10), transparent 60%);
    mix-blend-mode: soft-light;
    opacity: max(var(--login-bg-grid-opacity), .25);
  }

/* Frame overlay */
.ax-login__frame{
  position: fixed;
  inset: clamp(10px, 2vw, 18px);
  z-index: 2;
  pointer-events: none;
  border-radius: 18px;
  background:
    linear-gradient(90deg, rgba(255,32,52,.6), transparent 70%) top left/ 220px 1px no-repeat,
    linear-gradient(90deg, transparent 30%, rgba(255,32,52,.45)) bottom right/ 200px 1px no-repeat,
    linear-gradient(180deg, rgba(255,255,255,.12), transparent 60%) top right/1px 140px no-repeat,
    linear-gradient(180deg, rgba(255,255,255,.12), transparent 60%) bottom left/1px 140px no-repeat;
  filter: drop-shadow(0 0 22px rgba(255,32,52,.12));
  animation: ax-frame-pulse 9s ease-in-out infinite;
}
.ax-login__frame::before{
  content:"";
  position:absolute;
  inset:0;
  border:1px solid rgba(255,255,255,.08);
  border-radius: inherit;
  clip-path: polygon(14px 0, calc(100% - 14px) 0, 100% 14px, 100% calc(100% - 14px), calc(100% - 14px) 100%, 14px 100%, 0 calc(100% - 14px), 0 14px);
}
.ax-login__frame::after{
  content:"";
  position:absolute;
  inset:3px;
  border:1px solid rgba(255,32,52,.35);
  border-radius: 14px;
  clip-path: polygon(12px 0, calc(100% - 12px) 0, 100% 12px, 100% calc(100% - 12px), calc(100% - 12px) 100%, 12px 100%, 0 calc(100% - 12px), 0 12px);
  opacity:.9;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.35), transparent);
  background-size: 220px 2px;
  background-repeat: no-repeat;
  background-position: -240px 18%;
  mix-blend-mode: screen;
  animation: ax-frame-scan 10s linear infinite;
}
@keyframes ax-frame-pulse{
  0%, 100%{ opacity:.9; }
  50%{ opacity:.7; }
}
@keyframes ax-frame-scan{
  0%{ background-position: -240px 18%; }
  100%{ background-position: calc(100% + 240px) 82%; }
}
.ax-login.ax-glitch .ax-login__frame{
  animation: ax-frame-jitter .18s steps(2) both;
}
@keyframes ax-frame-jitter{
  0%{ transform: translateX(0); }
  50%{ transform: translateX(1px) skewX(0.2deg); }
  100%{ transform: translateX(0); }
}

/* Login card enhancements */
.ax-login .ax-login-card{
  position: relative;
  z-index: 3;
  overflow: hidden;
  border-radius: var(--r-xl, 18px);
  border: 1px solid rgba(255,32,52,.42);
  background:
    linear-gradient(180deg, rgba(14,8,10,.94), rgba(8,6,8,.98)),
    repeating-linear-gradient(0deg, rgba(255,32,52,.06) 0 1px, transparent 1px 6px);
  box-shadow:
    0 0 0 1px rgba(255,32,52,.16) inset,
    0 22px 48px rgba(0,0,0,.45),
    0 0 28px rgba(255,32,52,.18);
}
@supports (clip-path: polygon(0 0)){
  .ax-login .ax-login-card{
    clip-path: polygon(14px 0, calc(100% - 14px) 0, 100% 14px, 100% calc(100% - 14px), calc(100% - 14px) 100%, 14px 100%, 0 calc(100% - 14px), 0 14px);
  }
}
.ax-login .ax-login-card::before{
  content:"";
  position:absolute;
  inset:0;
  background:
    linear-gradient(120deg, rgba(255,255,255,.10), transparent 35%),
    radial-gradient(340px 140px at 18% 0%, rgba(255,32,52,.22), transparent 60%);
  opacity:.6;
  pointer-events:none;
}
.ax-login .ax-login-card::after{
  content:"";
  position:absolute;
  inset:0;
  background:
    repeating-linear-gradient(0deg, rgba(255,255,255,.08) 0 1px, transparent 1px 4px),
    linear-gradient(90deg, rgba(255,32,52,.16), transparent 60%);
  opacity:0;
  mix-blend-mode: screen;
  animation: ax-card-glitch 12s steps(1) infinite;
  pointer-events:none;
}
.ax-login.ax-glitch .ax-login-card{
  animation: ax-card-jitter .18s steps(2) both;
}
.ax-login.ax-glitch .ax-login-card::after{
  opacity:.35;
}
@keyframes ax-card-glitch{
  0%, 92%, 100%{ opacity:0; transform: translateX(0); }
  93%{ opacity:.28; transform: translateX(-5px); }
  94%{ opacity:.12; transform: translateX(3px); }
  95%{ opacity:0; transform: translateX(0); }
}
@keyframes ax-card-jitter{
  0%{ transform: translateX(0); }
  50%{ transform: translateX(-1px) skewX(-0.2deg); }
  100%{ transform: translateX(0); }
}

/* Сабтайтл по центру: красивый градиент + бегущий underline */
.ax-login .ax-login-sub{
  position: relative;
  margin: 10px auto 8px;
  text-align: center;
  font: 600 12px/1.7 var(--ax-font-mono, "JetBrains Mono", monospace);
  letter-spacing: .18em; text-transform: uppercase;
  background: linear-gradient(90deg, #ffe9ec, #ffb4be);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  filter: drop-shadow(0 0 10px rgba(255,32,52,.18));
}
.ax-login .ax-login-sub::after{
  content:"";
  position:absolute; left:50%; bottom:-8px; transform:translateX(-50%);
  width: min(60%, 420px); height: 2px; border-radius:999px;
  background:
    linear-gradient(90deg, transparent, rgba(255,64,86,.35) 6%, var(--ax-red) 50%, rgba(255,64,86,.35) 94%, transparent),
    repeating-linear-gradient(90deg, rgba(255,255,255,.16) 0 8px, transparent 8px 16px);
  mix-blend-mode: screen;
  animation: ax-code-line 2.8s cubic-bezier(.2,.8,.2,1) infinite;
  box-shadow: 0 0 18px rgba(255,32,52,.26);
}
@keyframes ax-code-line{
  0%   { background-position: 0 0,   0 0;   opacity:.95; }
  50%  { background-position: 0 0, -64px 0; opacity:.7; }
  100% { background-position: 0 0, -128px 0; opacity:.95; }
}

/* --- VIKTOR HR (scoped to login) --- */

/* базовый разделитель */
.ax-login .ax-hr{
  display:block;
  position:relative;
  width:100%;
  height:1px;
  margin:.5rem 0;
  background: transparent;
}

/* линия + маска для острых концов, плавный центр */
.ax-login .ax-hr.ax-hr--viktor{
  --hr-red: var(--ax-red, #ff2034);
  height:2px;
  margin:10px 0 12px;
  border:0;
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(255,64,86,.10) 14%,
    rgba(255,64,86,.24) 28%,
    var(--hr-red) 50%,
    rgba(255,64,86,.24) 72%,
    rgba(255,64,86,.10) 86%,
    transparent 100%);
  background-repeat: no-repeat;
  -webkit-mask-image: linear-gradient(90deg, transparent 0, #000 10%, #000 90%, transparent 100%);
          mask-image: linear-gradient(90deg, transparent 0, #000 10%, #000 90%, transparent 100%);
}

/* мягкий центральный блик */
.ax-login .ax-hr.ax-hr--viktor::before{
  content:"";
  position:absolute;
  left:50%; top:-6px; transform: translateX(-50%);
  width: 72px; height: 14px; pointer-events:none;
  background: radial-gradient(60% 100% at 50% 50%,
    rgba(255,96,112,.42) 0%,
    rgba(255,96,112,.14) 55%,
    rgba(255,96,112,0) 100%);
  filter: blur(.6px);
  opacity:.66;
}

/* свечение — отдельный слой с маской */
.ax-login .ax-hr.ax-hr--viktor::after{
  content:"";
  position:absolute;
  left:0; right:0; top:-7px; height:16px; pointer-events:none;
  background: radial-gradient(60% 160% at 50% 50%,
    rgba(255,32,52,.22) 0%,
    rgba(255,32,52,0) 70%);
  -webkit-mask-image: linear-gradient(90deg, transparent 0, #000 10%, #000 90%, transparent 100%);
          mask-image: linear-gradient(90deg, transparent 0, #000 10%, #000 90%, transparent 100%);
}

/* узкий вариант — без ресэмплинга */
.ax-login .ax-hr.ax-hr--viktor.slim{
  clip-path: inset(0 7%);
  opacity:.95;
  margin:14px 0;
}

.ax-login .ax-login-head + .ax-hr.ax-hr--viktor{
  margin-top:6px; margin-bottom:12px;
}

/* --- Hover-reveal bottom hint (pill-triggered) --- */
/* закреплена у нижнего края (фиксируется к вьюпорту, центрируется) */
.ax-login .ax-bottom-hint{
  position: fixed;
  left: 50%;
  bottom: clamp(8px, 2vh, 18px);
  transform: translateX(-50%);
  z-index: 5;                  /* над фоновыми слоями */
  grid-row: auto;
  justify-self: center;        /* по центру по горизонтали */
  width: min(96vw, 1100px);
  margin: 0;                   /* без нижнего внешнего отступа — не увеличиваем высоту страницы */
  padding-bottom: var(--safe-bottom, 0px);
  display: grid; place-items: center;
  pointer-events: auto;
}

/* красная плашка-триггер */
.ax-login .ax-bottom-hint__pill{
  all: unset;
  width: 94px; height: 10px; border-radius: 999px;
  background: linear-gradient(180deg, var(--ax-red), color-mix(in srgb, var(--ax-red-2) 70%, var(--ax-red) 30%));
  box-shadow: 0 0 0 1px rgba(58,18,22,.85) inset, 0 0 22px rgba(255,32,52,.35);
  cursor: pointer; pointer-events: auto;
  transition: transform .18s ease, box-shadow .2s ease, filter .2s ease;
}
.ax-login .ax-bottom-hint__pill:hover,
.ax-login .ax-bottom-hint__pill:focus-visible{
  transform: translateY(-1px);
  box-shadow: 0 0 0 1px rgba(58,18,22,1) inset, 0 0 32px rgba(255,32,52,.45);
  filter: saturate(1.05);
}

/* панель с подсказкой (раскрывается) */
.ax-login .ax-bottom-hint__panel{
  pointer-events: auto;
  margin-top: 6px;
  width: 100%;
  max-width: 1100px;
  border: 1px solid #3a1216; border-radius: 12px;
  background: linear-gradient(180deg, #1a1012, #12080a);
  box-shadow: 0 0 14px rgba(255,32,52,.10) inset, 0 12px 28px rgba(0,0,0,.30);
  color: #ffdfe1;
  display: flex; align-items: center; justify-content: center; gap: 16px;
  overflow: hidden;
  max-height: 0; padding: 0;
  opacity: 0; transform: translateY(6px) scale(.995);
  transition: max-height .26s cubic-bezier(.2,.8,.2,1), padding .22s cubic-bezier(.2,.8,.2,1), opacity .18s ease, transform .22s cubic-bezier(.2,.8,.2,1), box-shadow .22s ease;
}

/* стабильное раскрытие: hover контейнера, фокус внутри, hover плашки или панели */
.ax-login .ax-bottom-hint:hover .ax-bottom-hint__panel,
.ax-login .ax-bottom-hint:focus-within .ax-bottom-hint__panel,
.ax-login .ax-bottom-hint__pill:hover + .ax-bottom-hint__panel,
.ax-login .ax-bottom-hint__pill:focus-visible + .ax-bottom-hint__panel,
.ax-login .ax-bottom-hint__panel:hover{
  max-height: 56px; padding: 8px 14px;
  opacity: 1; transform: translateY(0) scale(1);
  box-shadow: 0 0 0 1px rgba(255,32,52,.20) inset, 0 0 26px rgba(255,32,52,.18), 0 12px 28px rgba(0,0,0,.30);
}

.ax-login .ax-bottom-hint__brand{
  font: 700 12px/1 var(--ax-font-mono, "JetBrains Mono", monospace);
  letter-spacing: .12em; text-transform: uppercase; color: #ffdfe1; white-space: nowrap;
}
.ax-login .ax-bottom-hint__text{
  font: 12.5px/1.5 var(--ax-font-mono, "JetBrains Mono", monospace);
  letter-spacing: .08em; text-transform: uppercase; color: #ffdfe1; opacity:.95; text-align:center;
}
.ax-login .ax-bottom-hint__sep{
  flex: 0 0 8px; height: 1px; align-self: stretch; opacity:.25;
  background: linear-gradient(90deg, var(--ax-red), transparent);
  box-shadow: 0 0 16px rgba(255,32,52,.26);
}

/* reduced motion */
  @media (prefers-reduced-motion: reduce){
    .ax-login .ax-bottom-hint__pill,
    .ax-login .ax-bottom-hint__panel{ transition: none; }
    .ax-login__x-scan{ animation: none !important; }
    .ax-login__bg::after{ animation: none !important; }
    .ax-login .ax-login-card::after{ animation: none !important; }
    .ax-login__frame,
    .ax-login__frame::after{ animation: none !important; }
    .ax-login .ax-login-sub::after{ animation: none !important; }
    .ax-login__bg-haze,
    .ax-login__bg-beams{ animation: none !important; }
  }

/* Smartphone оптимизации */
@media (max-width: 560px){
  .ax-login__frame{
    inset: 10px;
    border-radius: 14px;
  }
  .ax-orion{
    inset:-10%;
    width:120%;
    height:120%;
    opacity:.88;
    filter: saturate(1.03) contrast(1.05);
  }
  .ax-login__bg-beams{
    opacity:.25;
  }
  .ax-login__bg::before{
    background:
      radial-gradient(900px 360px at 80% 110%, #17060a 0%, transparent 55%),
      linear-gradient(135deg, var(--ax-bg) 72%, var(--ax-ink) 100%);
  }
  .ax-login .ax-login-sub{ font-size: 11px; letter-spacing:.16em; }
  .ax-login .ax-login-sub::after{ width: 72%; opacity:.9; }
  .ax-login .ax-bottom-hint__panel{
    max-height: 64px;
    padding: 8px 12px;
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
